{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pc cam\\\\Desktop\\\\Full-Project\\\\client\\\\src\\\\components\\\\pages\\\\Requests\\\\Request.js\";\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport Helmet from 'react-helmet';\nimport { Container, Form } from 'react-bootstrap';\nimport useStyles from './Request-jss'; // Actions\n\nimport { request, clearErrors } from '../../../redux/actions/requestActions';\nimport { setAlert } from '../../../redux/actions/alertActions'; // App layout components\n\nimport Spinner from '../../layout/Spinner/Spinner'; // Utils\n\nimport { WEBSITE_NAME } from '../../../utils/Data';\n\nconst Request = props => {\n  const {\n    error,\n    loading,\n    request,\n    clearErrors,\n    setAlert\n  } = props;\n  const [req, setReq] = useState({\n    email: '',\n    name: '',\n    category: '',\n    offer: ''\n  });\n  const {\n    name,\n    email,\n    category,\n    offer\n  } = req;\n\n  const onChange = e => setReq({ ...req,\n    [e.target.name]: e.target.value\n  });\n\n  inputChangedHandler = (event, inputIdentifier) => {\n    const updatedReq = { ...req\n    };\n    const updatedForm = { ...updatedReq[inputIdentifier]\n    };\n    updatedFormElement.value = event.target.value;\n    updatedFormElement.touched = true;\n    updatedReq[inputIdentifier] = updatedFormElement;\n\n    if (updatedReq.category.value === 'All categories') {\n      updatedReq.offers.elementConfig.options = [];\n    }\n\n    if (updatedReq.category.value === 'Social aid') {\n      updatedReq.offers.elementConfig.options = [{\n        value: 'Retirement',\n        displayValue: 'Retirement'\n      }, {\n        value: 'Death',\n        displayValue: 'Death'\n      }, {\n        value: 'Marriage',\n        displayValue: 'Marriage'\n      }, {\n        value: 'New born',\n        displayValue: 'New born'\n      }, {\n        value: 'Circumcision',\n        displayValue: 'Circumcision'\n      }];\n    }\n\n    ;\n\n    if (updatedReq.category.value === 'Health services') {\n      updatedReq.offers.elementConfig.options = [{\n        value: 'Surgery operations',\n        displayValue: 'Surgery operations'\n      }, {\n        value: 'Hammamat( mineral bath )',\n        displayValue: 'Hammamat( mineral bath )'\n      }];\n    }\n\n    ;\n\n    if (updatedReq.category.value === 'Solidarity') {\n      updatedReq.offers.elementConfig.options = [{\n        value: 'Aids for accident and catastrophe',\n        displayValue: 'Aids for accident and catastrophe'\n      }, {\n        value: ' Aids for the exceptional cases',\n        displayValue: ' Aids for the exceptional cases'\n      }];\n    }\n\n    ;\n\n    if (updatedReq.category.value === 'Other services') {\n      updatedReq.offers.elementConfig.options = [{\n        value: 'Exceptional loan',\n        displayValue: 'Exceptional loan'\n      }, {\n        value: 'Sport and cultural activities',\n        displayValue: 'Sport and cultural activities'\n      }];\n    }\n\n    ;\n\n    if (updatedReq.category.value === 'All categories') {\n      updatedReq.offers.elementConfig.options = [{\n        value: 'All types',\n        displayValue: 'All types'\n      }];\n    }\n\n    let formIsValid = true;\n\n    for (let inputIdentifier in updatedReq) {\n      formIsValid = updatedReq[inputIdentifier].valid && formIsValid;\n    }\n\n    this.setState({\n      orderForm: updatedReq,\n      formIsValid: formIsValid\n    });\n  };\n\n  useEffect(() => {\n    if (error && error.length) {\n      if (typeof error === 'object') {\n        error.forEach(err => {\n          setAlert(err.msg, 'danger');\n        });\n      } else {\n        setAlert(error, 'danger');\n      }\n\n      clearErrors();\n    } // eslint-disable-next-line\n\n  }, [error]);\n\n  const onSubmit = async e => {\n    e.preventDefault();\n\n    if (category === '' || offer === '' || email === '' || name === '') {\n      setAlert('Please enter all fields', 'danger');\n    } else {\n      await request({\n        name,\n        email,\n        category,\n        offer\n      });\n    }\n  };\n\n  const classes = useStyles();\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Helmet, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }\n  }, `${WEBSITE_NAME} | Request`)), /*#__PURE__*/React.createElement(Container, {\n    className: `${classes.page} `,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-inner px-3 mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"auth mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"mb-3 text-center \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    className: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 15\n    }\n  }, \"Add a request\")), /*#__PURE__*/React.createElement(Form, {\n    className: \"form form-container\",\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }\n  }, \"Email\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"email\",\n    placeholder: \"Email\",\n    name: \"email\",\n    value: email,\n    onChange: onChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 17\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"Full Name\",\n    name: \"name\",\n    value: name,\n    onChange: onChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 17\n    }\n  }, \"category\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"category\",\n    name: \"category\",\n    value: category,\n    onChange: onChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 17\n    }\n  }, \"offer\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"offer\",\n    name: \"offer\",\n    value: offer,\n    onChange: onChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"links d-flex align-items-center justify-content-between mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 15\n    }\n  }, loading ? /*#__PURE__*/React.createElement(Spinner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 19\n    }\n  }) : /*#__PURE__*/React.createElement(\"button\", {\n    className: \"button-primary\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 19\n    }\n  }, \"SEND\")))))));\n};\n\nconst mapSateToProps = state => ({\n  error: state.auth.error,\n  loading: state.auth.loading\n});\n\nexport default connect(mapSateToProps, {\n  request,\n  clearErrors,\n  setAlert\n})(Request);","map":{"version":3,"sources":["C:/Users/pc cam/Desktop/Full-Project/client/src/components/pages/Requests/Request.js"],"names":["React","useEffect","useState","connect","Helmet","Container","Form","useStyles","request","clearErrors","setAlert","Spinner","WEBSITE_NAME","Request","props","error","loading","req","setReq","email","name","category","offer","onChange","e","target","value","inputChangedHandler","event","inputIdentifier","updatedReq","updatedForm","updatedFormElement","touched","offers","elementConfig","options","displayValue","formIsValid","valid","setState","orderForm","length","forEach","err","msg","onSubmit","preventDefault","classes","page","mapSateToProps","state","auth"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,MAAP,MAAmB,cAAnB;AACA,SAASC,SAAT,EAAoBC,IAApB,QAAgC,iBAAhC;AACA,OAAOC,SAAP,MAAsB,eAAtB,C,CAEA;;AACA,SAASC,OAAT,EAAkBC,WAAlB,QAAqC,uCAArC;AACA,SAASC,QAAT,QAAyB,qCAAzB,C,CAEA;;AACA,OAAOC,OAAP,MAAoB,8BAApB,C,CAEA;;AACA,SAASC,YAAT,QAA6B,qBAA7B;;AAGA,MAAMC,OAAO,GAAIC,KAAD,IAAW;AACzB,QAAM;AACJC,IAAAA,KADI;AAEJC,IAAAA,OAFI;AAGJR,IAAAA,OAHI;AAIJC,IAAAA,WAJI;AAKJC,IAAAA;AALI,MAMFI,KANJ;AAQA,QAAM,CAACG,GAAD,EAAMC,MAAN,IAAgBhB,QAAQ,CAAC;AAC7BiB,IAAAA,KAAK,EAAE,EADsB;AAE7BC,IAAAA,IAAI,EAAC,EAFwB;AAG7BC,IAAAA,QAAQ,EAAE,EAHmB;AAI7BC,IAAAA,KAAK,EAAE;AAJsB,GAAD,CAA9B;AAQA,QAAM;AAAEF,IAAAA,IAAF;AAAQD,IAAAA,KAAR;AAAeE,IAAAA,QAAf;AAAyBC,IAAAA;AAAzB,MAAmCL,GAAzC;;AAEA,QAAMM,QAAQ,GAAIC,CAAD,IAAON,MAAM,CAAC,EAAE,GAAGD,GAAL;AAAU,KAACO,CAAC,CAACC,MAAF,CAASL,IAAV,GAAiBI,CAAC,CAACC,MAAF,CAASC;AAApC,GAAD,CAA9B;;AAEAC,EAAAA,mBAAmB,GAAG,CAACC,KAAD,EAAQC,eAAR,KAA4B;AAChD,UAAMC,UAAU,GAAG,EACf,GAAGb;AADY,KAAnB;AAGA,UAAMc,WAAW,GAAG,EAChB,GAAGD,UAAU,CAACD,eAAD;AADG,KAApB;AAGAG,IAAAA,kBAAkB,CAACN,KAAnB,GAA2BE,KAAK,CAACH,MAAN,CAAaC,KAAxC;AACAM,IAAAA,kBAAkB,CAACC,OAAnB,GAA6B,IAA7B;AACAH,IAAAA,UAAU,CAACD,eAAD,CAAV,GAA8BG,kBAA9B;;AACA,QAAIF,UAAU,CAACT,QAAX,CAAoBK,KAApB,KAA8B,gBAAlC,EAAoD;AAChDI,MAAAA,UAAU,CAACI,MAAX,CAAkBC,aAAlB,CAAgCC,OAAhC,GAA0C,EAA1C;AAGH;;AACD,QAAIN,UAAU,CAACT,QAAX,CAAoBK,KAApB,KAA8B,YAAlC,EAAgD;AAC5CI,MAAAA,UAAU,CAACI,MAAX,CAAkBC,aAAlB,CAAgCC,OAAhC,GAA0C,CACtC;AAACV,QAAAA,KAAK,EAAE,YAAR;AAAsBW,QAAAA,YAAY,EAAE;AAApC,OADsC,EAEtC;AAACX,QAAAA,KAAK,EAAE,OAAR;AAAiBW,QAAAA,YAAY,EAAE;AAA/B,OAFsC,EAGtC;AAACX,QAAAA,KAAK,EAAE,UAAR;AAAoBW,QAAAA,YAAY,EAAE;AAAlC,OAHsC,EAItC;AAACX,QAAAA,KAAK,EAAE,UAAR;AAAoBW,QAAAA,YAAY,EAAE;AAAlC,OAJsC,EAKtC;AAACX,QAAAA,KAAK,EAAE,cAAR;AAAwBW,QAAAA,YAAY,EAAE;AAAtC,OALsC,CAA1C;AAOH;;AAAA;;AACD,QAAIP,UAAU,CAACT,QAAX,CAAoBK,KAApB,KAA8B,iBAAlC,EAAqD;AACjDI,MAAAA,UAAU,CAACI,MAAX,CAAkBC,aAAlB,CAAgCC,OAAhC,GAA0C,CACtC;AAACV,QAAAA,KAAK,EAAE,oBAAR;AAA8BW,QAAAA,YAAY,EAAE;AAA5C,OADsC,EAEtC;AAACX,QAAAA,KAAK,EAAE,0BAAR;AAAoCW,QAAAA,YAAY,EAAE;AAAlD,OAFsC,CAA1C;AAIH;;AAAA;;AACD,QAAIP,UAAU,CAACT,QAAX,CAAoBK,KAApB,KAA8B,YAAlC,EAAgD;AAC5CI,MAAAA,UAAU,CAACI,MAAX,CAAkBC,aAAlB,CAAgCC,OAAhC,GAA0C,CACtC;AAACV,QAAAA,KAAK,EAAE,mCAAR;AAA6CW,QAAAA,YAAY,EAAE;AAA3D,OADsC,EAEtC;AAACX,QAAAA,KAAK,EAAE,iCAAR;AAA2CW,QAAAA,YAAY,EAAE;AAAzD,OAFsC,CAA1C;AAIH;;AAAA;;AACD,QAAIP,UAAU,CAACT,QAAX,CAAoBK,KAApB,KAA8B,gBAAlC,EAAoD;AAChDI,MAAAA,UAAU,CAACI,MAAX,CAAkBC,aAAlB,CAAgCC,OAAhC,GAAyC,CACrC;AAACV,QAAAA,KAAK,EAAE,kBAAR;AAA4BW,QAAAA,YAAY,EAAE;AAA1C,OADqC,EAErC;AAACX,QAAAA,KAAK,EAAE,+BAAR;AAAyCW,QAAAA,YAAY,EAAE;AAAvD,OAFqC,CAAzC;AAIH;;AAAA;;AACD,QAAIP,UAAU,CAACT,QAAX,CAAoBK,KAApB,KAA8B,gBAAlC,EAAoD;AAChDI,MAAAA,UAAU,CAACI,MAAX,CAAkBC,aAAlB,CAAgCC,OAAhC,GAAyC,CACrC;AAACV,QAAAA,KAAK,EAAE,WAAR;AAAqBW,QAAAA,YAAY,EAAE;AAAnC,OADqC,CAAzC;AAGH;;AAED,QAAIC,WAAW,GAAG,IAAlB;;AACA,SAAK,IAAIT,eAAT,IAA4BC,UAA5B,EAAwC;AACpCQ,MAAAA,WAAW,GAAGR,UAAU,CAACD,eAAD,CAAV,CAA4BU,KAA5B,IAAqCD,WAAnD;AACH;;AAED,SAAKE,QAAL,CAAc;AAACC,MAAAA,SAAS,EAAEX,UAAZ;AAAwBQ,MAAAA,WAAW,EAAEA;AAArC,KAAd;AACH,GAtDC;;AA0DArC,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIc,KAAK,IAAIA,KAAK,CAAC2B,MAAnB,EAA2B;AACzB,UAAI,OAAO3B,KAAP,KAAiB,QAArB,EAA+B;AAC7BA,QAAAA,KAAK,CAAC4B,OAAN,CAAeC,GAAD,IAAS;AACrBlC,UAAAA,QAAQ,CAACkC,GAAG,CAACC,GAAL,EAAU,QAAV,CAAR;AACD,SAFD;AAGD,OAJD,MAIO;AACLnC,QAAAA,QAAQ,CAACK,KAAD,EAAQ,QAAR,CAAR;AACD;;AAEDN,MAAAA,WAAW;AACZ,KAXa,CAad;;AACD,GAdQ,EAcN,CAACM,KAAD,CAdM,CAAT;;AAgBA,QAAM+B,QAAQ,GAAG,MAAOtB,CAAP,IAAa;AAC5BA,IAAAA,CAAC,CAACuB,cAAF;;AAEA,QAAI1B,QAAQ,KAAK,EAAb,IAAmBC,KAAK,KAAK,EAA7B,IAAmCH,KAAK,KAAK,EAA7C,IAAmDC,IAAI,KAAK,EAAhE,EAAqE;AACnEV,MAAAA,QAAQ,CAAC,yBAAD,EAA4B,QAA5B,CAAR;AACD,KAFD,MAEO;AACL,YAAMF,OAAO,CAAC;AAAEY,QAAAA,IAAF;AAASD,QAAAA,KAAT;AAAiBE,QAAAA,QAAjB;AAA4BC,QAAAA;AAA5B,OAAD,CAAb;AACD;AACF,GARD;;AAUA,QAAM0B,OAAO,GAAGzC,SAAS,EAAzB;AAEA,sBACE,uDACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAS,GAAEK,YAAa,YAAxB,CADF,CADF,eAIE,oBAAC,SAAD;AAAW,IAAA,SAAS,EAAG,GAAEoC,OAAO,CAACC,IAAK,GAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,2BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAI,IAAA,SAAS,EAAC,mBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAQ,IAAA,SAAS,EAAC,OAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,CADF,eAOE,oBAAC,IAAD;AAAM,IAAA,SAAS,EAAC,qBAAhB;AAAsC,IAAA,QAAQ,EAAEH,QAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,eAEE,oBAAC,IAAD,CAAM,OAAN;AACE,IAAA,IAAI,EAAC,OADP;AAEE,IAAA,WAAW,EAAC,OAFd;AAGE,IAAA,IAAI,EAAC,OAHP;AAIE,IAAA,KAAK,EAAE3B,KAJT;AAKE,IAAA,QAAQ,EAAEI,QALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADF,eAYE,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAEE,oBAAC,IAAD,CAAM,OAAN;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,WAAW,EAAC,WAFd;AAGE,IAAA,IAAI,EAAC,MAHP;AAIE,IAAA,KAAK,EAAEH,IAJT;AAKE,IAAA,QAAQ,EAAEG,QALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAZF,eAuBE,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE,oBAAC,IAAD,CAAM,OAAN;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,WAAW,EAAC,UAFd;AAGE,IAAA,IAAI,EAAC,UAHP;AAIE,IAAA,KAAK,EAAEF,QAJT;AAKE,IAAA,QAAQ,EAAEE,QALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAvBF,eAkCE,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,eAEE,oBAAC,IAAD,CAAM,OAAN;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,WAAW,EAAC,OAFd;AAGE,IAAA,IAAI,EAAC,OAHP;AAIE,IAAA,KAAK,EAAED,KAJT;AAKE,IAAA,QAAQ,EAAEC,QALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAlCF,eA6CE;AAAK,IAAA,SAAS,EAAC,8DAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEGP,OAAO,gBACN,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADM,gBAGN;AAAQ,IAAA,SAAS,EAAC,gBAAlB;AAAmC,IAAA,IAAI,EAAC,QAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YALJ,CA7CF,CAPF,CADF,CADF,CAJF,CADF;AAgFD,CA3LD;;AA6LA,MAAMkC,cAAc,GAAIC,KAAD,KAAY;AACjCpC,EAAAA,KAAK,EAAEoC,KAAK,CAACC,IAAN,CAAWrC,KADe;AAEjCC,EAAAA,OAAO,EAAEmC,KAAK,CAACC,IAAN,CAAWpC;AAFa,CAAZ,CAAvB;;AAKA,eAAeb,OAAO,CAAC+C,cAAD,EAAiB;AAAE1C,EAAAA,OAAF;AAAWC,EAAAA,WAAX;AAAwBC,EAAAA;AAAxB,CAAjB,CAAP,CACbG,OADa,CAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Helmet from 'react-helmet';\r\nimport { Container, Form } from 'react-bootstrap';\r\nimport useStyles from './Request-jss';\r\n\r\n// Actions\r\nimport { request, clearErrors } from '../../../redux/actions/requestActions';\r\nimport { setAlert } from '../../../redux/actions/alertActions';\r\n\r\n// App layout components\r\nimport Spinner from '../../layout/Spinner/Spinner';\r\n\r\n// Utils\r\nimport { WEBSITE_NAME } from '../../../utils/Data';\r\n\r\n\r\nconst Request = (props) => {\r\n  const {\r\n    error,\r\n    loading,\r\n    request,\r\n    clearErrors,\r\n    setAlert,\r\n  } = props;\r\n\r\n  const [req, setReq] = useState({\r\n    email: '',\r\n    name:'',\r\n    category: '',\r\n    offer: '',\r\n\r\n  });\r\n\r\n  const { name, email, category, offer } = req;\r\n\r\n  const onChange = (e) => setReq({ ...req, [e.target.name]: e.target.value });\r\n\r\n  inputChangedHandler = (event, inputIdentifier) => {\r\n    const updatedReq = {\r\n        ...req\r\n    };\r\n    const updatedForm = { \r\n        ...updatedReq[inputIdentifier]\r\n    };\r\n    updatedFormElement.value = event.target.value;\r\n    updatedFormElement.touched = true;\r\n    updatedReq[inputIdentifier] = updatedFormElement;\r\n    if (updatedReq.category.value === 'All categories') {\r\n        updatedReq.offers.elementConfig.options = [\r\n\r\n        ]\r\n    }\r\n    if (updatedReq.category.value === 'Social aid') {\r\n        updatedReq.offers.elementConfig.options = [\r\n            {value: 'Retirement', displayValue: 'Retirement'},\r\n            {value: 'Death', displayValue: 'Death'},\r\n            {value: 'Marriage', displayValue: 'Marriage'},\r\n            {value: 'New born', displayValue: 'New born'},\r\n            {value: 'Circumcision', displayValue: 'Circumcision'}\r\n        ]\r\n    };\r\n    if (updatedReq.category.value === 'Health services') {\r\n        updatedReq.offers.elementConfig.options = [\r\n            {value: 'Surgery operations', displayValue: 'Surgery operations'},\r\n            {value: 'Hammamat( mineral bath )', displayValue: 'Hammamat( mineral bath )'}\r\n        ]\r\n    };\r\n    if (updatedReq.category.value === 'Solidarity') {\r\n        updatedReq.offers.elementConfig.options = [\r\n            {value: 'Aids for accident and catastrophe', displayValue: 'Aids for accident and catastrophe'},\r\n            {value: ' Aids for the exceptional cases', displayValue: ' Aids for the exceptional cases'},\r\n        ]\r\n    };\r\n    if (updatedReq.category.value === 'Other services') {\r\n        updatedReq.offers.elementConfig.options =[\r\n            {value: 'Exceptional loan', displayValue: 'Exceptional loan'},\r\n            {value: 'Sport and cultural activities', displayValue: 'Sport and cultural activities'},\r\n        ]\r\n    };\r\n    if (updatedReq.category.value === 'All categories') {\r\n        updatedReq.offers.elementConfig.options =[\r\n            {value: 'All types', displayValue: 'All types'}\r\n        ]\r\n    }\r\n    \r\n    let formIsValid = true;\r\n    for (let inputIdentifier in updatedReq) {\r\n        formIsValid = updatedReq[inputIdentifier].valid && formIsValid;\r\n    }\r\n    \r\n    this.setState({orderForm: updatedReq, formIsValid: formIsValid});\r\n}\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    if (error && error.length) {\r\n      if (typeof error === 'object') {\r\n        error.forEach((err) => {\r\n          setAlert(err.msg, 'danger');\r\n        });\r\n      } else {\r\n        setAlert(error, 'danger');\r\n      }\r\n\r\n      clearErrors();\r\n    }\r\n\r\n    // eslint-disable-next-line\r\n  }, [error]);\r\n\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (category === '' || offer === '' || email === '' || name === '' ) {\r\n      setAlert('Please enter all fields', 'danger');\r\n    } else {\r\n      await request({ name , email , category , offer });\r\n    }\r\n  };\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>{`${WEBSITE_NAME} | Request`}</title>\r\n      </Helmet>\r\n      <Container className={`${classes.page} `}>\r\n        <div className='container-inner px-3 mt-4'>\r\n          <div className='auth mx-auto'>\r\n            <h4 className='mb-3 text-center '>\r\n              <strong className='title' >Add a request</strong>\r\n            </h4>\r\n        \r\n               \r\n               \r\n            <Form className='form form-container' onSubmit={onSubmit}>\r\n              <Form.Group>\r\n                <Form.Label>Email</Form.Label>\r\n                <Form.Control\r\n                  type='email'\r\n                  placeholder='Email'\r\n                  name='email'\r\n                  value={email}\r\n                  onChange={onChange}\r\n                />\r\n              </Form.Group>\r\n\r\n              <Form.Group>\r\n                <Form.Label>Name</Form.Label>\r\n                <Form.Control\r\n                  type='text'\r\n                  placeholder='Full Name'\r\n                  name='name'\r\n                  value={name}\r\n                  onChange={onChange}\r\n                />\r\n              </Form.Group>\r\n\r\n              <Form.Group>\r\n                <Form.Label>category</Form.Label>\r\n                <Form.Control\r\n                  type='text'\r\n                  placeholder='category'\r\n                  name='category'\r\n                  value={category}\r\n                  onChange={onChange}\r\n                />\r\n              </Form.Group>\r\n\r\n              <Form.Group>\r\n                <Form.Label>offer</Form.Label>\r\n                <Form.Control\r\n                  type='text'\r\n                  placeholder='offer'\r\n                  name='offer'\r\n                  value={offer}\r\n                  onChange={onChange}\r\n                />\r\n              </Form.Group>\r\n\r\n              <div className='links d-flex align-items-center justify-content-between mt-4'>\r\n                \r\n                {loading ? (\r\n                  <Spinner />\r\n                ) : (\r\n                  <button className='button-primary' type='submit'>\r\n                    SEND\r\n                  </button>\r\n                )}\r\n              </div>\r\n         \r\n\r\n\r\n\r\n\r\n            </Form>\r\n          </div>\r\n        </div>\r\n      </Container>\r\n    </>\r\n  );\r\n};\r\n\r\nconst mapSateToProps = (state) => ({\r\n  error: state.auth.error,\r\n  loading: state.auth.loading,\r\n});\r\n\r\nexport default connect(mapSateToProps, { request, clearErrors, setAlert })(\r\n  Request\r\n);\r\n\r\n"]},"metadata":{},"sourceType":"module"}