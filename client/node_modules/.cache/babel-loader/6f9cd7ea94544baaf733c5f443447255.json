{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pc cam\\\\Desktop\\\\Full-Project\\\\client\\\\src\\\\components\\\\pages\\\\Requests\\\\Request.js\";\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport Helmet from 'react-helmet';\nimport { Container, Form } from 'react-bootstrap';\nimport useStyles from './Request-jss'; // Actions\n\nimport { request, clearErrors } from '../../../redux/actions/requestActions';\nimport { setAlert } from '../../../redux/actions/alertActions'; // App layout components\n\nimport Spinner from '../../layout/Spinner/Spinner';\nimport Input from './InputElement'; // Utils\n\nimport { WEBSITE_NAME } from '../../../utils/Data';\n\nconst Request = props => {\n  const {\n    error,\n    loading,\n    request,\n    clearErrors,\n    setAlert\n  } = props;\n  const [req, setReq] = useState({\n    name: {\n      id: '0',\n      elementType: 'input',\n      elementConfig: {\n        type: 'text',\n        placeholder: 'Full Name'\n      },\n      value: '',\n      validation: {\n        required: true\n      },\n      valid: false,\n      touched: false\n    },\n    email: {\n      id: '1',\n      elementType: 'input',\n      elementConfig: {\n        type: 'email',\n        placeholder: 'Your E-Mail'\n      },\n      value: '',\n      validation: {\n        required: true,\n        isEmail: true\n      },\n      valid: false,\n      touched: false\n    },\n    category: {\n      id: '2',\n      elementType: 'select',\n      elementConfig: {\n        options: [{\n          value: 'All categories',\n          displayValue: 'All categories'\n        }, {\n          value: 'Social aid',\n          displayValue: 'Social aid'\n        }, {\n          value: 'Health services',\n          displayValue: 'Health services'\n        }, {\n          value: 'Solidarity',\n          displayValue: 'Solidarity'\n        }, {\n          value: 'Other services',\n          displayValue: 'Other services'\n        }]\n      },\n      value: '',\n      validation: {},\n      valid: true\n    },\n    offers: {\n      id: '3',\n      elementType: 'select',\n      elementConfig: {\n        options: [{\n          value: 'All offers',\n          displayValue: 'All offers'\n        }]\n      }\n    }\n  });\n  const {\n    name,\n    email,\n    category,\n    offer\n  } = req;\n\n  const onChange = e => setReq({ ...req,\n    [e.target.name]: e.target.value\n  });\n\n  useEffect(() => {\n    if (error && error.length) {\n      if (typeof error === 'object') {\n        error.forEach(err => {\n          setAlert(err.msg, 'danger');\n        });\n      } else {\n        setAlert(error, 'danger');\n      }\n\n      clearErrors();\n    } // eslint-disable-next-line\n\n  }, [error]);\n\n  const onSubmit = async e => {\n    e.preventDefault();\n\n    if (category === '' || offer === '' || email === '' || name === '') {\n      setAlert('Please enter all fields', 'danger');\n    } else {\n      await request({\n        name,\n        email,\n        category,\n        offer\n      });\n    }\n  };\n\n  const classes = useStyles();\n\n  const checkValidity = (value, rules) => {\n    let isValid = true;\n\n    if (!rules) {\n      return true;\n    }\n\n    if (rules.required) {\n      isValid = value.trim() !== '' && isValid;\n    }\n\n    if (rules.minLength) {\n      isValid = value.length >= rules.minLength && isValid;\n    }\n\n    if (rules.maxLength) {\n      isValid = value.length <= rules.maxLength && isValid;\n    }\n\n    if (rules.isEmail) {\n      const pattern = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;\n      isValid = pattern.test(value) && isValid;\n    }\n\n    if (rules.isNumeric) {\n      const pattern = /^\\d+$/;\n      isValid = pattern.test(value) && isValid;\n    }\n\n    return isValid;\n  };\n\n  const inputChangedHandler = (event, inputIdentifier) => {\n    const updatedForm = { ...req\n    };\n    const updatedElement = { ...updatedForm[inputIdentifier]\n    };\n    updatedElement.value = event.target.value;\n    updatedElement.valid = checkValidity(updatedElement.value, updatedElement.validation);\n    updatedElement.touched = true;\n    updatedForm[inputIdentifier] = updatedElement;\n\n    if (updatedForm.category.value === 'All categories') {\n      updatedForm.offers.elementConfig.options = [];\n    }\n\n    if (updatedForm.category.value === 'Social aid') {\n      updatedForm.offers.elementConfig.options = [{\n        value: 'Retirement',\n        displayValue: 'Retirement'\n      }, {\n        value: 'Death',\n        displayValue: 'Death'\n      }, {\n        value: 'Marriage',\n        displayValue: 'Marriage'\n      }, {\n        value: 'New born',\n        displayValue: 'New born'\n      }, {\n        value: 'Circumcision',\n        displayValue: 'Circumcision'\n      }];\n    }\n\n    ;\n\n    if (updatedForm.category.value === 'Health services') {\n      updatedForm.offers.elementConfig.options = [{\n        value: 'Surgery operations',\n        displayValue: 'Surgery operations'\n      }, {\n        value: 'Hammamat( mineral bath )',\n        displayValue: 'Hammamat( mineral bath )'\n      }];\n    }\n\n    ;\n\n    if (updatedForm.category.value === 'Solidarity') {\n      updatedForm.offers.elementConfig.options = [{\n        value: 'Aids for accident and catastrophe',\n        displayValue: 'Aids for accident and catastrophe'\n      }, {\n        value: ' Aids for the exceptional cases',\n        displayValue: ' Aids for the exceptional cases'\n      }];\n    }\n\n    ;\n\n    if (updatedForm.category.value === 'Other services') {\n      updatedForm.offers.elementConfig.options = [{\n        value: 'Exceptional loan',\n        displayValue: 'Exceptional loan'\n      }, {\n        value: 'Sport and cultural activities',\n        displayValue: 'Sport and cultural activities'\n      }];\n    }\n\n    ;\n\n    if (updatedForm.category.value === 'All categories') {\n      updatedForm.offers.elementConfig.options = [{\n        value: 'All types',\n        displayValue: 'All types'\n      }];\n    }\n\n    setReq({\n      updatedForm\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Helmet, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 9\n    }\n  }, `${WEBSITE_NAME} | Request`)), /*#__PURE__*/React.createElement(Container, {\n    className: `${classes.page} `,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-inner px-3 mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"auth mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"mb-3 text-center \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    className: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 15\n    }\n  }, \"Add a request\")), /*#__PURE__*/React.createElement(Form, {\n    className: \"form form-container\",\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    key: req.name.id,\n    elementType: req.name.elementType,\n    elementConfig: req.name.elementConfig,\n    value: req.name.value,\n    invalid: !req.name.valid,\n    shouldValidate: req.name.validation,\n    touched: req.name.touched,\n    changed: event => inputChangedHandler(event, req.name.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    key: req.email.id,\n    elementType: req.email.elementType,\n    elementConfig: req.email.elementConfig,\n    value: req.email.value,\n    invalid: !req.email.valid,\n    shouldValidate: req.email.validation,\n    touched: req.email.touched,\n    changed: event => inputChangedHandler(event, req.email.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    key: req.category.id,\n    elementType: req.category.elementType,\n    elementConfig: req.category.elementConfig,\n    value: req.category.value,\n    invalid: !req.category.valid,\n    shouldValidate: req.category.validation,\n    touched: req.category.touched,\n    changed: event => inputChangedHandler(event, req.category.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    key: req.offers.id,\n    elementType: req.offers.elementType,\n    elementConfig: req.offers.elementConfig,\n    value: req.offers.value,\n    invalid: !req.offers.valid,\n    shouldValidate: req.offers.validation,\n    touched: req.offers.touched,\n    changed: event => inputChangedHandler(event, req.offers.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"links d-flex align-items-center justify-content-between mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 15\n    }\n  }, loading ? /*#__PURE__*/React.createElement(Spinner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 19\n    }\n  }) : /*#__PURE__*/React.createElement(\"button\", {\n    className: \"button-primary\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 19\n    }\n  }, \"SEND\")))))));\n};\n\nconst mapSateToProps = state => ({\n  error: state.auth.error,\n  loading: state.auth.loading\n});\n\nexport default connect(mapSateToProps, {\n  request,\n  clearErrors,\n  setAlert\n})(Request);","map":{"version":3,"sources":["C:/Users/pc cam/Desktop/Full-Project/client/src/components/pages/Requests/Request.js"],"names":["React","useEffect","useState","connect","Helmet","Container","Form","useStyles","request","clearErrors","setAlert","Spinner","Input","WEBSITE_NAME","Request","props","error","loading","req","setReq","name","id","elementType","elementConfig","type","placeholder","value","validation","required","valid","touched","email","isEmail","category","options","displayValue","offers","offer","onChange","e","target","length","forEach","err","msg","onSubmit","preventDefault","classes","checkValidity","rules","isValid","trim","minLength","maxLength","pattern","test","isNumeric","inputChangedHandler","event","inputIdentifier","updatedForm","updatedElement","page","mapSateToProps","state","auth"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Helmet from 'react-helmet';\r\nimport { Container, Form } from 'react-bootstrap';\r\nimport useStyles from './Request-jss';\r\n\r\n// Actions\r\nimport { request, clearErrors } from '../../../redux/actions/requestActions';\r\nimport { setAlert } from '../../../redux/actions/alertActions';\r\n\r\n// App layout components\r\nimport Spinner from '../../layout/Spinner/Spinner';\r\nimport Input from './InputElement'\r\n// Utils\r\nimport { WEBSITE_NAME } from '../../../utils/Data';\r\n\r\n\r\nconst Request = (props) => {\r\n  const {\r\n    error,\r\n    loading,\r\n    request,\r\n    clearErrors,\r\n    setAlert,\r\n  } = props;\r\n\r\n  const [req, setReq] = useState({\r\n    name: {\r\n      id: '0',\r\n      elementType: 'input',\r\n      elementConfig: {\r\n          type: 'text',\r\n          placeholder: 'Full Name'\r\n      },\r\n      value: '',\r\n      validation: {\r\n          required: true\r\n      },\r\n      valid: false,\r\n      touched: false\r\n  },\r\n  email: {\r\n      id:'1',\r\n      elementType: 'input',\r\n      elementConfig: {\r\n          type: 'email',\r\n          placeholder: 'Your E-Mail'\r\n      },\r\n      value: '',\r\n      validation: {\r\n          required: true,\r\n          isEmail: true\r\n      },\r\n      valid: false,\r\n      touched: false\r\n  },\r\n  category: {\r\n      id:'2',\r\n      elementType: 'select',\r\n      elementConfig: {\r\n          options: [\r\n              {value: 'All categories', displayValue: 'All categories'},\r\n              {value: 'Social aid', displayValue: 'Social aid'},\r\n              {value: 'Health services', displayValue: 'Health services'},\r\n              {value: 'Solidarity', displayValue: 'Solidarity'},\r\n              {value: 'Other services', displayValue: 'Other services'}\r\n          ]\r\n      },\r\n      value: '',\r\n      validation: {},\r\n      valid: true\r\n  },\r\n  offers: {\r\n      id:'3',\r\n      elementType: 'select',\r\n      elementConfig: {\r\n          options: [\r\n              {value: 'All offers', displayValue: 'All offers'},\r\n          ]\r\n      }\r\n  }\r\n});\r\n\r\n  const { name, email, category, offer } = req;\r\n\r\n  const onChange = (e) => setReq({ ...req, [e.target.name]: e.target.value });\r\n\r\n  useEffect(() => {\r\n    if (error && error.length) {\r\n      if (typeof error === 'object') {\r\n        error.forEach((err) => {\r\n          setAlert(err.msg, 'danger');\r\n        });\r\n      } else {\r\n        setAlert(error, 'danger');\r\n      }\r\n\r\n      clearErrors();\r\n    }\r\n\r\n    // eslint-disable-next-line\r\n  }, [error]);\r\n\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (category === '' || offer === '' || email === '' || name === '' ) {\r\n      setAlert('Please enter all fields', 'danger');\r\n    } else {\r\n      await request({ name , email , category , offer });\r\n    }\r\n  };\r\n\r\n  const classes = useStyles();\r\n\r\nconst checkValidity = (value, rules) => {\r\n    let isValid = true;\r\n    if (!rules) {\r\n        return true;\r\n    }\r\n    \r\n    if (rules.required) {\r\n        isValid = value.trim() !== '' && isValid;\r\n    }\r\n\r\n    if (rules.minLength) {\r\n        isValid = value.length >= rules.minLength && isValid\r\n    }\r\n\r\n    if (rules.maxLength) {\r\n        isValid = value.length <= rules.maxLength && isValid\r\n    }\r\n\r\n    if (rules.isEmail) {\r\n        const pattern = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;\r\n        isValid = pattern.test(value) && isValid\r\n    }\r\n\r\n    if (rules.isNumeric) {\r\n        const pattern = /^\\d+$/;\r\n        isValid = pattern.test(value) && isValid\r\n    }\r\n\r\n    return isValid;\r\n}\r\n  \r\n const inputChangedHandler = (event, inputIdentifier) => {\r\n    const updatedForm = {\r\n        ...req\r\n    };\r\n    const updatedElement = { \r\n        ...updatedForm[inputIdentifier]\r\n    };\r\n    updatedElement.value = event.target.value;\r\n    updatedElement.valid = checkValidity(updatedElement.value, updatedElement.validation);\r\n    updatedElement.touched = true;\r\n    updatedForm[inputIdentifier] = updatedElement;\r\n    if (updatedForm.category.value === 'All categories') {\r\n        updatedForm.offers.elementConfig.options = [\r\n\r\n        ]\r\n    }\r\n    if (updatedForm.category.value === 'Social aid') {\r\n        updatedForm.offers.elementConfig.options = [\r\n            {value: 'Retirement', displayValue: 'Retirement'},\r\n            {value: 'Death', displayValue: 'Death'},\r\n            {value: 'Marriage', displayValue: 'Marriage'},\r\n            {value: 'New born', displayValue: 'New born'},\r\n            {value: 'Circumcision', displayValue: 'Circumcision'}\r\n        ]\r\n    };\r\n    if (updatedForm.category.value === 'Health services') {\r\n        updatedForm.offers.elementConfig.options = [\r\n            {value: 'Surgery operations', displayValue: 'Surgery operations'},\r\n            {value: 'Hammamat( mineral bath )', displayValue: 'Hammamat( mineral bath )'}\r\n        ]\r\n    };\r\n    if (updatedForm.category.value === 'Solidarity') {\r\n        updatedForm.offers.elementConfig.options = [\r\n            {value: 'Aids for accident and catastrophe', displayValue: 'Aids for accident and catastrophe'},\r\n            {value: ' Aids for the exceptional cases', displayValue: ' Aids for the exceptional cases'},\r\n        ]\r\n    };\r\n    if (updatedForm.category.value === 'Other services') {\r\n        updatedForm.offers.elementConfig.options =[\r\n            {value: 'Exceptional loan', displayValue: 'Exceptional loan'},\r\n            {value: 'Sport and cultural activities', displayValue: 'Sport and cultural activities'},\r\n        ]\r\n    };\r\n    if (updatedForm.category.value === 'All categories') {\r\n        updatedForm.offers.elementConfig.options =[\r\n            {value: 'All types', displayValue: 'All types'}\r\n        ]\r\n    }\r\n    \r\n    setReq({updatedForm});\r\n}\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>{`${WEBSITE_NAME} | Request`}</title>\r\n      </Helmet>\r\n      <Container className={`${classes.page} `}>\r\n        <div className='container-inner px-3 mt-4'>\r\n          <div className='auth mx-auto'>\r\n            <h4 className='mb-3 text-center '>\r\n              <strong className='title' >Add a request</strong>\r\n            </h4>\r\n        \r\n               \r\n               \r\n            <Form className='form form-container' onSubmit={onSubmit}>\r\n                        \r\n                        \r\n                        <Input \r\n                        key={req.name.id}\r\n                        elementType={req.name.elementType}\r\n                        elementConfig={req.name.elementConfig}\r\n                        value={req.name.value}\r\n                        invalid={!req.name.valid}\r\n                        shouldValidate={req.name.validation}\r\n                        touched={req.name.touched}\r\n                        changed={(event) => inputChangedHandler(event, req.name.id)} />\r\n\r\n                        <Input \r\n                        key={req.email.id}\r\n                        elementType={req.email.elementType}\r\n                        elementConfig={req.email.elementConfig}\r\n                        value={req.email.value}\r\n                        invalid={!req.email.valid}\r\n                        shouldValidate={req.email.validation}\r\n                        touched={req.email.touched}\r\n                        changed={(event) => inputChangedHandler(event, req.email.id)} />\r\n\r\n                        <Input \r\n                        key={req.category.id}\r\n                        elementType={req.category.elementType}\r\n                        elementConfig={req.category.elementConfig}\r\n                        value={req.category.value}\r\n                        invalid={!req.category.valid}\r\n                        shouldValidate={req.category.validation}\r\n                        touched={req.category.touched}\r\n                        changed={(event) => inputChangedHandler(event, req.category.id)} />\r\n\r\n                        <Input \r\n                        key={req.offers.id}\r\n                        elementType={req.offers.elementType}\r\n                        elementConfig={req.offers.elementConfig}\r\n                        value={req.offers.value}\r\n                        invalid={!req.offers.valid}\r\n                        shouldValidate={req.offers.validation}\r\n                        touched={req.offers.touched}\r\n                        changed={(event) => inputChangedHandler(event, req.offers.id)} />\r\n              \r\n\r\n              <div className='links d-flex align-items-center justify-content-between mt-4'>\r\n                \r\n                {loading ? (\r\n                  <Spinner />\r\n                ) : (\r\n                  <button className='button-primary' type='submit'>\r\n                    SEND\r\n                  </button>\r\n                )}\r\n              </div>\r\n         \r\n\r\n\r\n\r\n\r\n            </Form>\r\n          </div>\r\n        </div>\r\n      </Container>\r\n    </>\r\n  );\r\n};\r\n\r\nconst mapSateToProps = (state) => ({\r\n  error: state.auth.error,\r\n  loading: state.auth.loading,\r\n});\r\n\r\nexport default connect(mapSateToProps, { request, clearErrors, setAlert })(\r\n  Request\r\n);\r\n\r\n"]},"metadata":{},"sourceType":"module"}