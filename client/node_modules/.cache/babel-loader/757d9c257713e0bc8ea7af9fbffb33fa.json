{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pc cam\\\\Desktop\\\\soc\\\\src\\\\components\\\\pages\\\\posts\\\\requests\\\\RequestShow.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport Helmet from 'react-helmet';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faArrowLeft, faMapMarkerAlt, faPhoneAlt, faEnvelope } from '@fortawesome/free-solid-svg-icons'; // Actions\n\nimport { getRequestById } from '../../../../redux/actions/postActions';\nimport { getUserPhone, clearUserPhone, sendMessage } from '../../../../redux/actions/messageActions'; // Utils\n\nimport formatedDate from '../../../../utils/formatedDate';\nimport { WEBSITE_NAME } from '../../../../utils/websiteData'; // Components\n\nimport Sidebar from '../../../layout/Sidebar';\nimport Spinner from '../../../layout/Spinner';\nimport DialogPhone from '../../../layout/dialogs/DialogPhone';\nimport DialogMessage from '../../../layout/dialogs/DialogMessage';\nimport DialogImage from '../../../layout/dialogs/DialogImage';\nimport useStyles from '../posts-jss';\n\nconst RequestShow = props => {\n  const classes = useStyles();\n  const {\n    match,\n    isAuthenticated,\n    request,\n    getRequestById,\n    user_phone,\n    getUserPhone,\n    clearUserPhone,\n    sendMessage,\n    loading,\n    loading_send,\n    loading_phone,\n    // error,\n    error_send\n  } = props;\n  useEffect(() => {\n    getRequestById(match.params.id); //eslint-disable-next-line\n  }, []);\n  useEffect(() => {\n    if (user_phone) {\n      setPhone(user_phone.phone);\n      setShowPhone(true);\n    } //eslint-disable-next-line\n\n  }, [user_phone]);\n  const [phone, setPhone] = useState(null);\n  const [showPhone, setShowPhone] = useState(false);\n\n  const handleShowPhone = () => {\n    getUserPhone(request.user_id);\n  };\n\n  const handleHidePhone = () => {\n    setShowPhone(false);\n    clearUserPhone();\n  };\n\n  const [showMessage, setShowMessage] = useState(false);\n  const [message, setMessage] = useState('');\n\n  const handleShowMessage = () => {\n    if (!isAuthenticated) return;\n    setShowMessage(true);\n  };\n\n  const handleMessageOnChange = e => {\n    setMessage(e.target.value);\n  };\n\n  const sendMessageHandle = async () => {\n    if (!message) return;\n    if (request.user_id === null) return;\n    await sendMessage({\n      user_Reciever: request.user_id,\n      content: message\n    });\n\n    if (!error_send) {\n      setMessage('');\n      setShowMessage(false);\n    }\n  };\n\n  const handleHideMessage = () => {\n    setShowMessage(false);\n    setMessage('');\n  };\n\n  const [image, setImage] = useState(null);\n  const [showImage, setShowImage] = useState(false);\n\n  const handleShowImage = e => {\n    const imageSrc = e.target.src;\n\n    if (imageSrc && imageSrc !== '') {\n      setImage(imageSrc);\n      setShowImage(true);\n    }\n  };\n\n  const handleHideImage = () => {\n    setShowImage(false);\n    setImage(null);\n  };\n\n  const {\n    title,\n    content,\n    wilaya,\n    city,\n    createdAt,\n    images\n  } = request || {};\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Helmet, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }\n  }, `${WEBSITE_NAME} | ${loading ? 'Loading...' : title || 'Not found'}`)), /*#__PURE__*/React.createElement(\"div\", {\n    className: `${classes.page} card-shadow text-center`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }\n  }, loading ? /*#__PURE__*/React.createElement(Spinner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 11\n    }\n  }) : !request ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }\n  }, \"Not found\")) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12 col-lg-9\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h6\", {\n    className: \"text-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    className: \"link-primary\",\n    to: `/requests`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    className: \"mr-1\",\n    icon: faArrowLeft,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 21\n    }\n  }), ' ', \"Requests\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post-content mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 19\n    }\n  }, title), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"description mt-3 mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"h6\", {\n    className: \"subtitle mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 21\n    }\n  }, \"Description\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"mb-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 21\n    }\n  }, content)), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"mb-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"date\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 21\n    }\n  }, formatedDate(createdAt))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pictures mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row justify-content-center align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 21\n    }\n  }, images !== null && images.length > 0 ? images.map(image => /*#__PURE__*/React.createElement(\"div\", {\n    key: image.id,\n    className: \"col-12 col-sm-6 col-md-4 col-lg-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"img img-fluid img-rounded-corners mb-2\",\n    src: image.path,\n    alt: image.name,\n    onClick: handleShowImage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 29\n    }\n  }))) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 25\n    }\n  }, \"No pictures\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"contact-details text-center mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    className: \"icon mb-2\",\n    icon: faMapMarkerAlt,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"location\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h6\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 23\n    }\n  }, `${wilaya}, ${city}`)), /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"title mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 21\n    }\n  }, \"You want to help?\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-block d-md-inline-block mb-2 mr-md-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"button-primary\",\n    onClick: handleShowPhone,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    className: \"mr-2\",\n    icon: faPhoneAlt,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 27\n    }\n  }), \"Phone call\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-inline d-md-inline-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"button-transparent\",\n    disabled: !isAuthenticated,\n    onClick: handleShowMessage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    className: \"mr-2\",\n    icon: faEnvelope,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 27\n    }\n  }), \"Message\")))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-none d-lg-block col-12 col-lg-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Sidebar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 17\n    }\n  })))), /*#__PURE__*/React.createElement(DialogPhone, {\n    show: showPhone,\n    phone: phone,\n    onHide: handleHidePhone,\n    loading: loading_phone,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(DialogMessage, {\n    show: showMessage,\n    message: message,\n    loadingSend: loading_send,\n    handleMessageOnChange: handleMessageOnChange,\n    sendMessage: sendMessageHandle,\n    onHide: handleHideMessage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(DialogImage, {\n    show: showImage,\n    image: image,\n    onHide: handleHideImage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 9\n    }\n  })));\n};\n\nconst mapSateToProps = state => ({\n  isAuthenticated: state.auth.isAuthenticated,\n  request: state.posts.request,\n  loading: state.posts.loading,\n  user_phone: state.messages.user_phone,\n  loading_phone: state.messages.loading_phone,\n  loading_send: state.messages.loading_send,\n  error_send: state.messages.error_send\n});\n\nexport default connect(mapSateToProps, {\n  getRequestById,\n  getUserPhone,\n  clearUserPhone,\n  sendMessage\n})(RequestShow);","map":{"version":3,"sources":["C:/Users/pc cam/Desktop/soc/src/components/pages/posts/requests/RequestShow.js"],"names":["React","useState","useEffect","Link","connect","Helmet","FontAwesomeIcon","faArrowLeft","faMapMarkerAlt","faPhoneAlt","faEnvelope","getRequestById","getUserPhone","clearUserPhone","sendMessage","formatedDate","WEBSITE_NAME","Sidebar","Spinner","DialogPhone","DialogMessage","DialogImage","useStyles","RequestShow","props","classes","match","isAuthenticated","request","user_phone","loading","loading_send","loading_phone","error_send","params","id","setPhone","phone","setShowPhone","showPhone","handleShowPhone","user_id","handleHidePhone","showMessage","setShowMessage","message","setMessage","handleShowMessage","handleMessageOnChange","e","target","value","sendMessageHandle","user_Reciever","content","handleHideMessage","image","setImage","showImage","setShowImage","handleShowImage","imageSrc","src","handleHideImage","title","wilaya","city","createdAt","images","page","length","map","path","name","mapSateToProps","state","auth","posts","messages"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport Helmet from 'react-helmet';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faArrowLeft,\n  faMapMarkerAlt,\n  faPhoneAlt,\n  faEnvelope,\n} from '@fortawesome/free-solid-svg-icons';\n\n// Actions\nimport { getRequestById } from '../../../../redux/actions/postActions';\nimport {\n  getUserPhone,\n  clearUserPhone,\n  sendMessage,\n} from '../../../../redux/actions/messageActions';\n\n// Utils\nimport formatedDate from '../../../../utils/formatedDate';\nimport { WEBSITE_NAME } from '../../../../utils/websiteData';\n\n// Components\nimport Sidebar from '../../../layout/Sidebar';\nimport Spinner from '../../../layout/Spinner';\nimport DialogPhone from '../../../layout/dialogs/DialogPhone';\nimport DialogMessage from '../../../layout/dialogs/DialogMessage';\nimport DialogImage from '../../../layout/dialogs/DialogImage';\n\nimport useStyles from '../posts-jss';\n\nconst RequestShow = (props) => {\n  const classes = useStyles();\n\n  const {\n    match,\n    isAuthenticated,\n    request,\n    getRequestById,\n    user_phone,\n    getUserPhone,\n    clearUserPhone,\n    sendMessage,\n    loading,\n    loading_send,\n    loading_phone,\n    // error,\n    error_send,\n  } = props;\n\n  useEffect(() => {\n    getRequestById(match.params.id);\n\n    //eslint-disable-next-line\n  }, []);\n\n  useEffect(() => {\n    if (user_phone) {\n      setPhone(user_phone.phone);\n      setShowPhone(true);\n    }\n    //eslint-disable-next-line\n  }, [user_phone]);\n\n  const [phone, setPhone] = useState(null);\n  const [showPhone, setShowPhone] = useState(false);\n\n  const handleShowPhone = () => {\n    getUserPhone(request.user_id);\n  };\n\n  const handleHidePhone = () => {\n    setShowPhone(false);\n    clearUserPhone();\n  };\n\n  const [showMessage, setShowMessage] = useState(false);\n  const [message, setMessage] = useState('');\n\n  const handleShowMessage = () => {\n    if (!isAuthenticated) return;\n    setShowMessage(true);\n  };\n\n  const handleMessageOnChange = (e) => {\n    setMessage(e.target.value);\n  };\n\n  const sendMessageHandle = async () => {\n    if (!message) return;\n    if (request.user_id === null) return;\n    await sendMessage({\n      user_Reciever: request.user_id,\n      content: message,\n    });\n    if (!error_send) {\n      setMessage('');\n      setShowMessage(false);\n    }\n  };\n\n  const handleHideMessage = () => {\n    setShowMessage(false);\n    setMessage('');\n  };\n\n  const [image, setImage] = useState(null);\n  const [showImage, setShowImage] = useState(false);\n\n  const handleShowImage = (e) => {\n    const imageSrc = e.target.src;\n    if (imageSrc && imageSrc !== '') {\n      setImage(imageSrc);\n      setShowImage(true);\n    }\n  };\n\n  const handleHideImage = () => {\n    setShowImage(false);\n    setImage(null);\n  };\n\n  const { title, content, wilaya, city, createdAt, images } = request || {};\n\n  return (\n    <div>\n      <Helmet>\n        <title>{`${WEBSITE_NAME} | ${\n          loading ? 'Loading...' : title || 'Not found'\n        }`}</title>\n      </Helmet>\n      <div className={`${classes.page} card-shadow text-center`}>\n        {loading ? (\n          <Spinner />\n        ) : !request ? (\n          <div className='row'>\n            <div className='col'>Not found</div>\n          </div>\n        ) : (\n          <div className='content'>\n            <div className='row'>\n              <div className='col-12 col-lg-9'>\n                <h6 className='text-left'>\n                  <Link className='link-primary' to={`/requests`}>\n                    <FontAwesomeIcon className='mr-1' icon={faArrowLeft} />{' '}\n                    Requests\n                  </Link>\n                </h6>\n\n                <div className='post-content mt-4'>\n                  <h3 className='title'>{title}</h3>\n\n                  <div className='description mt-3 mx-auto'>\n                    <h6 className='subtitle mb-2'>\n                      {/* <FontAwesomeIcon className='icon mr-2' icon={faFileAlt} /> */}\n                      Description\n                    </h6>\n                    <p className='mb-1'>{content}</p>\n                  </div>\n\n                  <p className='mb-1'>\n                    <span className='date'>{formatedDate(createdAt)}</span>\n                  </p>\n\n                  <div className='pictures mt-4'>\n                    <div className='row justify-content-center align-items-center'>\n                      {images !== null && images.length > 0 ? (\n                        images.map((image) => (\n                          <div\n                            key={image.id}\n                            className='col-12 col-sm-6 col-md-4 col-lg-3'\n                          >\n                            <img\n                              className='img img-fluid img-rounded-corners mb-2'\n                              src={image.path}\n                              alt={image.name}\n                              onClick={handleShowImage}\n                            />\n                          </div>\n                        ))\n                      ) : (\n                        <div className='col'>No pictures</div>\n                      )}\n                    </div>\n                  </div>\n\n                  <div className='contact-details text-center mt-4'>\n                    <FontAwesomeIcon\n                      className='icon mb-2'\n                      icon={faMapMarkerAlt}\n                    />\n                    <div className='location'>\n                      <h6>{`${wilaya}, ${city}`}</h6>\n                    </div>\n\n                    <h5 className='title mb-4'>You want to help?</h5>\n\n                    <div className='mt-4'>\n                      <div className='d-block d-md-inline-block mb-2 mr-md-2'>\n                        <button\n                          className='button-primary'\n                          onClick={handleShowPhone}\n                        >\n                          <FontAwesomeIcon className='mr-2' icon={faPhoneAlt} />\n                          Phone call\n                        </button>\n                      </div>\n                      <div className='d-inline d-md-inline-block'>\n                        <button\n                          className='button-transparent'\n                          disabled={!isAuthenticated}\n                          onClick={handleShowMessage}\n                        >\n                          <FontAwesomeIcon className='mr-2' icon={faEnvelope} />\n                          Message\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div className='d-none d-lg-block col-12 col-lg-3'>\n                <Sidebar />\n              </div>\n            </div>\n          </div>\n        )}\n        <DialogPhone\n          show={showPhone}\n          phone={phone}\n          onHide={handleHidePhone}\n          loading={loading_phone}\n        />\n\n        <DialogMessage\n          show={showMessage}\n          message={message}\n          loadingSend={loading_send}\n          handleMessageOnChange={handleMessageOnChange}\n          sendMessage={sendMessageHandle}\n          onHide={handleHideMessage}\n        />\n\n        <DialogImage show={showImage} image={image} onHide={handleHideImage} />\n      </div>\n    </div>\n  );\n};\n\nconst mapSateToProps = (state) => ({\n  isAuthenticated: state.auth.isAuthenticated,\n  request: state.posts.request,\n  loading: state.posts.loading,\n  user_phone: state.messages.user_phone,\n  loading_phone: state.messages.loading_phone,\n  loading_send: state.messages.loading_send,\n  error_send: state.messages.error_send,\n});\n\nexport default connect(mapSateToProps, {\n  getRequestById,\n  getUserPhone,\n  clearUserPhone,\n  sendMessage,\n})(RequestShow);\n"]},"metadata":{},"sourceType":"module"}