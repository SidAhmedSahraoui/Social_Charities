{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pc cam\\\\Desktop\\\\Full-Project\\\\client\\\\src\\\\components\\\\pages\\\\Requests\\\\Request.js\";\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport Helmet from 'react-helmet';\nimport { Container, Form } from 'react-bootstrap';\nimport useStyles from './Request-jss'; // Actions\n\nimport { request, clearErrors } from '../../../redux/actions/requestActions';\nimport { setAlert } from '../../../redux/actions/alertActions'; // App layout components\n\nimport Spinner from '../../layout/Spinner/Spinner';\nimport Input from './InputElement'; // Utils\n\nimport { WEBSITE_NAME } from '../../../utils/Data';\n\nconst Request = props => {\n  const {\n    error,\n    loading,\n    request,\n    clearErrors,\n    setAlert\n  } = props;\n  const [state, setState] = useState({\n    orderForm: {\n      name: {\n        elementType: 'input',\n        elementConfig: {\n          type: 'text',\n          placeholder: 'Full Name'\n        },\n        value: '',\n        validation: {\n          required: true\n        },\n        valid: false,\n        touched: false\n      },\n      email: {\n        elementType: 'input',\n        elementConfig: {\n          type: 'email',\n          placeholder: 'Your E-Mail'\n        },\n        value: '',\n        validation: {\n          required: true,\n          isEmail: true\n        },\n        valid: false,\n        touched: false\n      },\n      category: {\n        elementType: 'select',\n        elementConfig: {\n          options: [{\n            value: '',\n            displayValue: 'All categories'\n          }, {\n            value: 'Social aid',\n            displayValue: 'Social aid'\n          }, {\n            value: 'Health services',\n            displayValue: 'Health services'\n          }, {\n            value: 'Solidarity',\n            displayValue: 'Solidarity'\n          }, {\n            value: 'Other services',\n            displayValue: 'Other services'\n          }]\n        },\n        value: '',\n        validation: {},\n        valid: true\n      },\n      offer: {\n        elementType: 'select',\n        elementConfig: {\n          options: [{\n            value: '',\n            displayValue: 'All offers'\n          }]\n        },\n        value: '',\n        validation: {},\n        valid: true\n      }\n    },\n    formIsValid: false,\n    loading: false\n  });\n  useEffect(() => {\n    if (error && error.length) {\n      if (typeof error === 'object') {\n        error.forEach(err => {\n          setAlert(err.msg, 'danger');\n        });\n      } else {\n        setAlert(error, 'danger');\n      }\n\n      clearErrors();\n    } // eslint-disable-next-line\n\n  }, [error]);\n\n  const onSubmit = async e => {\n    e.preventDefault();\n\n    if (state.orderForm.category.value === '' || state.orderForm.offer.value === '' || state.orderForm.email.value === '' || state.orderForm.name.value === '') {\n      setAlert('Please enter all fields', 'danger');\n    } else {\n      const name = state.orderForm.name.value;\n      const email = state.orderForm.email.value;\n      const category = state.orderForm.category.value;\n      const offer = state.orderForm.offer.value;\n      await request({\n        name,\n        email,\n        category,\n        offer\n      });\n      setAlert('Request send with success', 'success');\n    }\n  };\n\n  const classes = useStyles();\n\n  const checkValidity = (value, rules) => {\n    let isValid = true;\n\n    if (!rules) {\n      return true;\n    }\n\n    if (rules.required) {\n      isValid = value.trim() !== '' && isValid;\n    }\n\n    if (rules.minLength) {\n      isValid = value.length >= rules.minLength && isValid;\n    }\n\n    if (rules.maxLength) {\n      isValid = value.length <= rules.maxLength && isValid;\n    }\n\n    if (rules.isEmail) {\n      const pattern = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;\n      isValid = pattern.test(value) && isValid;\n    }\n\n    if (rules.isNumeric) {\n      const pattern = /^\\d+$/;\n      isValid = pattern.test(value) && isValid;\n    }\n\n    return isValid;\n  };\n\n  const inputChangedHandler = (event, inputIdentifier) => {\n    const updatedOrderForm = { ...state.orderForm\n    };\n    const updatedFormElement = { ...updatedOrderForm[inputIdentifier]\n    };\n    updatedFormElement.value = event.target.value;\n    updatedFormElement.valid = checkValidity(updatedFormElement.value, updatedFormElement.validation);\n    updatedFormElement.touched = true;\n    updatedOrderForm[inputIdentifier] = updatedFormElement;\n\n    if (updatedOrderForm.category.value === 'All categories') {\n      updatedOrderForm.offers.elementConfig.options = [];\n    }\n\n    if (updatedOrderForm.category.value === 'Social aid') {\n      updatedOrderForm.offer.elementConfig.options = [{\n        value: '',\n        displayValue: 'All offers'\n      }, {\n        value: 'Retirement',\n        displayValue: 'Retirement'\n      }, {\n        value: 'Death',\n        displayValue: 'Death'\n      }, {\n        value: 'Marriage',\n        displayValue: 'Marriage'\n      }, {\n        value: 'New born',\n        displayValue: 'New born'\n      }, {\n        value: 'Circumcision',\n        displayValue: 'Circumcision'\n      }];\n    }\n\n    ;\n\n    if (updatedOrderForm.category.value === 'Health services') {\n      updatedOrderForm.offer.elementConfig.options = [{\n        value: '',\n        displayValue: 'All offers'\n      }, {\n        value: 'Surgery operations',\n        displayValue: 'Surgery operations'\n      }, {\n        value: 'Hammamat( mineral bath )',\n        displayValue: 'Hammamat( mineral bath )'\n      }];\n    }\n\n    ;\n\n    if (updatedOrderForm.category.value === 'Solidarity') {\n      updatedOrderForm.offer.elementConfig.options = [{\n        value: '',\n        displayValue: 'All offers'\n      }, {\n        value: 'Aids for accident and catastrophe',\n        displayValue: 'Aids for accident and catastrophe'\n      }, {\n        value: ' Aids for the exceptional cases',\n        displayValue: ' Aids for the exceptional cases'\n      }];\n    }\n\n    ;\n\n    if (updatedOrderForm.category.value === 'Other services') {\n      updatedOrderForm.offer.elementConfig.options = [{\n        value: '',\n        displayValue: 'All offers'\n      }, {\n        value: 'Exceptional loan',\n        displayValue: 'Exceptional loan'\n      }, {\n        value: 'Sport and cultural activities',\n        displayValue: 'Sport and cultural activities'\n      }];\n    }\n\n    ;\n\n    if (updatedOrderForm.category.value === 'All categories') {\n      updatedOrderForm.offer.elementConfig.options = [{\n        value: '',\n        displayValue: 'offers'\n      }];\n    }\n\n    let formIsValid = true;\n\n    for (let inputIdentifier in updatedOrderForm) {\n      formIsValid = updatedOrderForm[inputIdentifier].valid && formIsValid;\n    }\n\n    setState({\n      orderForm: updatedOrderForm,\n      formIsValid: formIsValid\n    });\n  };\n\n  const formElementsArray = [];\n\n  for (let key in state.orderForm) {\n    formElementsArray.push({\n      id: key,\n      config: state.orderForm[key]\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Helmet, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 9\n    }\n  }, `${WEBSITE_NAME} | Request`)), /*#__PURE__*/React.createElement(Container, {\n    className: `${classes.page} `,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-inner px-3 mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"auth mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"mb-3 text-center \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    className: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 15\n    }\n  }, \"Add a request\")), /*#__PURE__*/React.createElement(Form, {\n    className: \"form form-container\",\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 13\n    }\n  }, formElementsArray.map(formElement => /*#__PURE__*/React.createElement(Input, {\n    key: formElement.id,\n    elementType: formElement.config.elementType,\n    elementConfig: formElement.config.elementConfig,\n    value: formElement.config.value,\n    invalid: !formElement.config.valid,\n    shouldValidate: formElement.config.validation,\n    touched: formElement.config.touched,\n    changed: event => inputChangedHandler(event, formElement.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"links d-flex align-items-center justify-content-between mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 15\n    }\n  }, loading ? /*#__PURE__*/React.createElement(Spinner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 19\n    }\n  }) : /*#__PURE__*/React.createElement(\"button\", {\n    className: \"button-primary\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 19\n    }\n  }, \"SEND\")))))));\n};\n\nconst mapSateToProps = state => ({\n  error: state.auth.error,\n  loading: state.auth.loading\n});\n\nexport default connect(mapSateToProps, {\n  request,\n  clearErrors,\n  setAlert\n})(Request);","map":{"version":3,"sources":["C:/Users/pc cam/Desktop/Full-Project/client/src/components/pages/Requests/Request.js"],"names":["React","useEffect","useState","connect","Helmet","Container","Form","useStyles","request","clearErrors","setAlert","Spinner","Input","WEBSITE_NAME","Request","props","error","loading","state","setState","orderForm","name","elementType","elementConfig","type","placeholder","value","validation","required","valid","touched","email","isEmail","category","options","displayValue","offer","formIsValid","length","forEach","err","msg","onSubmit","e","preventDefault","classes","checkValidity","rules","isValid","trim","minLength","maxLength","pattern","test","isNumeric","inputChangedHandler","event","inputIdentifier","updatedOrderForm","updatedFormElement","target","offers","formElementsArray","key","push","id","config","page","map","formElement","mapSateToProps","auth"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Helmet from 'react-helmet';\r\nimport { Container, Form } from 'react-bootstrap';\r\nimport useStyles from './Request-jss';\r\n\r\n// Actions\r\nimport { request, clearErrors } from '../../../redux/actions/requestActions';\r\nimport { setAlert } from '../../../redux/actions/alertActions';\r\n\r\n// App layout components\r\nimport Spinner from '../../layout/Spinner/Spinner';\r\nimport Input from './InputElement'\r\n// Utils\r\nimport { WEBSITE_NAME } from '../../../utils/Data';\r\n\r\n\r\nconst Request = (props) => {\r\n  const {\r\n    error,\r\n    loading,\r\n    request,\r\n    clearErrors,\r\n    setAlert,\r\n  } = props;\r\n\r\n  const [state, setState] = useState({\r\n    orderForm: {\r\n        name: {\r\n            elementType: 'input',\r\n            elementConfig: {\r\n                type: 'text',\r\n                placeholder: 'Full Name'\r\n            },\r\n            value: '',\r\n            validation: {\r\n                required: true\r\n            },\r\n            valid: false,\r\n            touched: false\r\n        },\r\n        email: {\r\n            elementType: 'input',\r\n            elementConfig: {\r\n                type: 'email',\r\n                placeholder: 'Your E-Mail'\r\n            },\r\n            value: '',\r\n            validation: {\r\n                required: true,\r\n                isEmail: true\r\n            },\r\n            valid: false,\r\n            touched: false\r\n        },\r\n        category: {\r\n            elementType: 'select',\r\n            elementConfig: {\r\n                options: [\r\n                    {value: '', displayValue: 'All categories'},\r\n                    {value: 'Social aid', displayValue: 'Social aid'},\r\n                    {value: 'Health services', displayValue: 'Health services'},\r\n                    {value: 'Solidarity', displayValue: 'Solidarity'},\r\n                    {value: 'Other services', displayValue: 'Other services'}\r\n                ]\r\n            },\r\n            value: '',\r\n            validation: {},\r\n            valid: true\r\n        },\r\n        offer: {\r\n            elementType: 'select',\r\n            elementConfig: {\r\n                options: [\r\n                    {value: '', displayValue: 'All offers'},\r\n                ]\r\n            },\r\n            value: '',\r\n            validation: {},\r\n            valid: true\r\n        }\r\n    },\r\n    formIsValid: false,\r\n    loading: false\r\n});\r\n\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    if (error && error.length) {\r\n      if (typeof error === 'object') {\r\n        error.forEach((err) => {\r\n          setAlert(err.msg, 'danger');\r\n        });\r\n      } else {\r\n        setAlert(error, 'danger');\r\n      }\r\n\r\n      clearErrors();\r\n    }\r\n\r\n    // eslint-disable-next-line\r\n  }, [error]);\r\n\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (state.orderForm.category.value === '' || state.orderForm.offer.value === '' || \r\n         state.orderForm.email.value === '' || state.orderForm.name.value === '' ) {\r\n      setAlert('Please enter all fields', 'danger');\r\n    } else {\r\n      const name = state.orderForm.name.value ;\r\n      const email = state.orderForm.email.value ;\r\n      const category = state.orderForm.category.value ;\r\n      const offer = state.orderForm.offer.value ;\r\n      await request({ name , email , category , offer });\r\n      setAlert('Request send with success' , 'success')\r\n    }\r\n  };\r\n\r\n  const classes = useStyles();\r\n\r\nconst checkValidity = (value, rules) => {\r\n    let isValid = true;\r\n    if (!rules) {\r\n        return true;\r\n    }\r\n    \r\n    if (rules.required) {\r\n        isValid = value.trim() !== '' && isValid;\r\n    }\r\n\r\n    if (rules.minLength) {\r\n        isValid = value.length >= rules.minLength && isValid\r\n    }\r\n\r\n    if (rules.maxLength) {\r\n        isValid = value.length <= rules.maxLength && isValid\r\n    }\r\n\r\n    if (rules.isEmail) {\r\n        const pattern = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;\r\n        isValid = pattern.test(value) && isValid\r\n    }\r\n\r\n    if (rules.isNumeric) {\r\n        const pattern = /^\\d+$/;\r\n        isValid = pattern.test(value) && isValid\r\n    }\r\n\r\n    return isValid;\r\n}\r\n  \r\nconst inputChangedHandler = (event, inputIdentifier) => {\r\n  const updatedOrderForm = {\r\n      ...state.orderForm\r\n  };\r\n  const updatedFormElement = { \r\n      ...updatedOrderForm[inputIdentifier]\r\n  };\r\n  updatedFormElement.value = event.target.value;\r\n  updatedFormElement.valid = checkValidity(updatedFormElement.value, updatedFormElement.validation);\r\n  updatedFormElement.touched = true;\r\n  updatedOrderForm[inputIdentifier] = updatedFormElement;\r\n  if (updatedOrderForm.category.value === 'All categories') {\r\n      updatedOrderForm.offers.elementConfig.options = [\r\n\r\n      ]\r\n  }\r\n  if (updatedOrderForm.category.value === 'Social aid') {\r\n      updatedOrderForm.offer.elementConfig.options = [\r\n           {value: '', displayValue: 'All offers'},\r\n          {value: 'Retirement', displayValue: 'Retirement'},\r\n          {value: 'Death', displayValue: 'Death'},\r\n          {value: 'Marriage', displayValue: 'Marriage'},\r\n          {value: 'New born', displayValue: 'New born'},\r\n          {value: 'Circumcision', displayValue: 'Circumcision'}\r\n      ]\r\n  };\r\n  if (updatedOrderForm.category.value === 'Health services') {\r\n      updatedOrderForm.offer.elementConfig.options = [\r\n          {value: '', displayValue: 'All offers'},\r\n          {value: 'Surgery operations', displayValue: 'Surgery operations'},\r\n          {value: 'Hammamat( mineral bath )', displayValue: 'Hammamat( mineral bath )'}\r\n      ]\r\n  };\r\n  if (updatedOrderForm.category.value === 'Solidarity') {\r\n      updatedOrderForm.offer.elementConfig.options = [\r\n         {value: '', displayValue: 'All offers'},\r\n          {value: 'Aids for accident and catastrophe', displayValue: 'Aids for accident and catastrophe'},\r\n          {value: ' Aids for the exceptional cases', displayValue: ' Aids for the exceptional cases'},\r\n      ]\r\n  };\r\n  if (updatedOrderForm.category.value === 'Other services') {\r\n      updatedOrderForm.offer.elementConfig.options =[\r\n          {value: '', displayValue: 'All offers'},\r\n          {value: 'Exceptional loan', displayValue: 'Exceptional loan'},\r\n          {value: 'Sport and cultural activities', displayValue: 'Sport and cultural activities'},\r\n      ]\r\n  };\r\n  if (updatedOrderForm.category.value === 'All categories') {\r\n      updatedOrderForm.offer.elementConfig.options =[\r\n          {value: '', displayValue: 'offers'}\r\n      ]\r\n  }\r\n  \r\n  let formIsValid = true;\r\n  for (let inputIdentifier in updatedOrderForm) {\r\n      formIsValid = updatedOrderForm[inputIdentifier].valid && formIsValid;\r\n  }\r\n  \r\n  setState({orderForm: updatedOrderForm, formIsValid: formIsValid});\r\n}\r\n\r\nconst formElementsArray = [];\r\n        for (let key in state.orderForm) {\r\n            formElementsArray.push({\r\n                id: key,\r\n                config: state.orderForm[key]\r\n            });\r\n        }\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>{`${WEBSITE_NAME} | Request`}</title>\r\n      </Helmet>\r\n      <Container className={`${classes.page} `}>\r\n        <div className='container-inner px-3 mt-4'>\r\n          <div className='auth mx-auto'>\r\n            <h4 className='mb-3 text-center '>\r\n              <strong className='title' >Add a request</strong>\r\n            </h4>\r\n        \r\n               \r\n               \r\n            <Form className='form form-container' onSubmit={onSubmit}>\r\n                        \r\n                        \r\n            <form onSubmit={onSubmit}>\r\n                {formElementsArray.map(formElement => (\r\n                    <Input \r\n                        key={formElement.id}\r\n                        elementType={formElement.config.elementType}\r\n                        elementConfig={formElement.config.elementConfig}\r\n                        value={formElement.config.value}\r\n                        invalid={!formElement.config.valid}\r\n                        shouldValidate={formElement.config.validation}\r\n                        touched={formElement.config.touched}\r\n                        changed={(event) => inputChangedHandler(event, formElement.id)} />\r\n                ))}\r\n            </form>\r\n              \r\n\r\n              <div className='links d-flex align-items-center justify-content-between mt-4'>\r\n                \r\n                {loading ? (\r\n                  <Spinner />\r\n                ) : (\r\n                  <button className='button-primary' type='submit'>\r\n                    SEND\r\n                  </button>\r\n                )}\r\n              </div>\r\n         \r\n\r\n\r\n\r\n\r\n            </Form>\r\n          </div>\r\n        </div>\r\n      </Container>\r\n    </>\r\n  );\r\n};\r\n\r\nconst mapSateToProps = (state) => ({\r\n  error: state.auth.error,\r\n  loading: state.auth.loading,\r\n});\r\n\r\nexport default connect(mapSateToProps, { request, clearErrors, setAlert })(\r\n  Request\r\n);\r\n\r\n"]},"metadata":{},"sourceType":"module"}