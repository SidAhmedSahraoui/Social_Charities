{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pc cam\\\\desktop\\\\Full-Project\\\\client\\\\src\\\\components\\\\pages\\\\Dropdown\\\\Settings.js\";\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport Helmet from 'react-helmet';\nimport { Container, Form } from 'react-bootstrap'; // Actions\n\nimport { loadSettings, updateProfile, updatePassword, clearErrors } from '../../../redux/actions/authActions';\nimport { setAlert } from '../../../redux/actions/alertActions'; // App layout components\n\nimport Spinner from '../../layout/Spinner'; // Utils\n\nimport { WEBSITE_NAME } from '../../../utils/Data';\nimport useStyles from './drop-jss';\n\nconst Settings = props => {\n  const {\n    user,\n    error,\n    loading_settings,\n    loadSettings,\n    updateProfile,\n    updatePassword,\n    clearErrors,\n    setAlert\n  } = props;\n  const [userData, setUserData] = useState({\n    username: '',\n    email: '',\n    name: '',\n    bio: '',\n    gender: 0,\n    allow_messages: false\n  });\n  useEffect(() => {\n    loadSettings(); //eslint-disable-next-line\n  }, []);\n  const {\n    username,\n    email,\n    name,\n    bio,\n    gender,\n    allow_messages\n  } = userData;\n  const [passwords, setPasswords] = useState({\n    old_password: '',\n    new_password: ''\n  });\n  const {\n    old_password,\n    new_password\n  } = passwords;\n\n  const onChange = e => setUserData({ ...user,\n    [e.target.name]: e.target.value\n  });\n\n  const onChangeGender = e => setUserData({ ...userData,\n    gender: parseInt(e.target.value)\n  });\n\n  const onChangePosition = e => setUserData({ ...userData,\n    bio: e.target.value\n  });\n\n  const onChangeAllowMessages = e => setUserData({ ...userData,\n    allow_messages: e.target.value === 'true' ? true : false\n  });\n\n  const onChangePasswords = e => setPasswords({ ...passwords,\n    [e.target.name]: e.target.value\n  });\n\n  useEffect(() => {\n    if (error && error.length) {\n      if (typeof error === 'object') {\n        error.forEach(err => {\n          setAlert(err.msg, 'danger');\n        });\n      } else {\n        setAlert(error, 'danger');\n      }\n\n      clearErrors();\n    } // eslint-disable-next-line\n\n  }, [error]);\n  useEffect(() => {\n    if (user) {\n      setUserData({ ...userData,\n        ...user\n      });\n    } // eslint-disable-next-line\n\n  }, [user]);\n\n  const onSubmit = async e => {\n    e.preventDefault();\n    await updateProfile({\n      allow_messages,\n      name,\n      bio,\n      gender\n    });\n  };\n\n  const onSubmitPassword = async e => {\n    e.preventDefault();\n\n    if (old_password === '') {\n      setAlert('Old password is empty', 'danger');\n      return;\n    }\n\n    if (new_password === '' || new_password.length < 6) {\n      setAlert('Password must contain at least 6 characters', 'danger');\n      return;\n    }\n\n    await updatePassword({\n      old_password,\n      new_password\n    });\n  };\n\n  const classes = useStyles();\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Helmet, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }\n  }, `${WEBSITE_NAME} | Settings`)), /*#__PURE__*/React.createElement(Container, {\n    className: `${classes.root}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-inner px-3 mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 9\n    }\n  }, loading_settings ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Spinner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 15\n    }\n  })) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"settings mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    className: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 17\n    }\n  }, \"Your informations\")), /*#__PURE__*/React.createElement(Form, {\n    className: \"form form-container\",\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    className: \"subtitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 19\n    }\n  }, \"Email\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"email\",\n    placeholder: \"Email\",\n    name: \"email\",\n    value: email,\n    readOnly: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    className: \"subtitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 19\n    }\n  }, \"Username\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"Username\",\n    name: \"username\",\n    value: username,\n    readOnly: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    className: \"subtitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 19\n    }\n  }, \"Fullname\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"Fullname\",\n    name: \"name\",\n    value: name,\n    onChange: onChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    className: \"subtitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 19\n    }\n  }, \"Position\"), /*#__PURE__*/React.createElement(Form.Control, {\n    as: \"select\",\n    name: \"bio\",\n    value: bio,\n    onChange: onChangePosition,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    defaultValue: true,\n    value: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 21\n    }\n  }, \"Not defined\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"MCA\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 21\n    }\n  }, \"MCA\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"MCB\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 21\n    }\n  }, \"MCB\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Professor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 21\n    }\n  }, \"Professor\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Administration staff\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 21\n    }\n  }, \"Administration staff\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"ATS\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 21\n    }\n  }, \"ATS\"))), /*#__PURE__*/React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    className: \"subtitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 19\n    }\n  }, \"Gender\"), /*#__PURE__*/React.createElement(Form.Control, {\n    as: \"select\",\n    name: \"gender\",\n    value: gender,\n    onChange: onChangeGender,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    defaultValue: true,\n    value: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 21\n    }\n  }, \"Not defined\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 21\n    }\n  }, \"Male\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 21\n    }\n  }, \"Female\"))), /*#__PURE__*/React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    className: \"subtitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 19\n    }\n  }, \"Allow receiving Notifications\"), /*#__PURE__*/React.createElement(Form.Control, {\n    as: \"select\",\n    name: \"allow_messages\",\n    value: allow_messages,\n    onChange: onChangeAllowMessages,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 21\n    }\n  }, \"Yes\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 21\n    }\n  }, \"No\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"links d-flex align-items-center justify-content-end mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 17\n    }\n  }, loading_settings ? /*#__PURE__*/React.createElement(Spinner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 21\n    }\n  }) : /*#__PURE__*/React.createElement(\"button\", {\n    className: \"button-primary\",\n    type: \"submit\",\n    onClick: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 21\n    }\n  }, \"Update\"))), /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"my-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    className: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 17\n    }\n  }, \"Security\")), /*#__PURE__*/React.createElement(Form, {\n    className: \"form form-container\",\n    onSubmit: onSubmitPassword,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    className: \"subtitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 19\n    }\n  }, \"Old password\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"password\",\n    placeholder: \"Old password\",\n    name: \"old_password\",\n    value: old_password,\n    onChange: onChangePasswords,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    className: \"subtitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 19\n    }\n  }, \"New password\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"password\",\n    placeholder: \"New password\",\n    name: \"new_password\",\n    value: new_password,\n    onChange: onChangePasswords,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"links d-flex align-items-center justify-content-end mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 17\n    }\n  }, loading_settings ? /*#__PURE__*/React.createElement(Spinner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 21\n    }\n  }) : /*#__PURE__*/React.createElement(\"button\", {\n    className: \"button-primary\",\n    type: \"submit\",\n    onClick: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 21\n    }\n  }, \"Update\")))))));\n};\n\nconst mapSateToProps = state => ({\n  user: state.auth.user,\n  error: state.auth.error,\n  loading_settings: state.auth.loading_settings\n});\n\nexport default connect(mapSateToProps, {\n  loadSettings,\n  updateProfile,\n  updatePassword,\n  clearErrors,\n  setAlert\n})(Settings);","map":{"version":3,"sources":["C:/Users/pc cam/desktop/Full-Project/client/src/components/pages/Dropdown/Settings.js"],"names":["React","useEffect","useState","connect","Helmet","Container","Form","loadSettings","updateProfile","updatePassword","clearErrors","setAlert","Spinner","WEBSITE_NAME","useStyles","Settings","props","user","error","loading_settings","userData","setUserData","username","email","name","bio","gender","allow_messages","passwords","setPasswords","old_password","new_password","onChange","e","target","value","onChangeGender","parseInt","onChangePosition","onChangeAllowMessages","onChangePasswords","length","forEach","err","msg","onSubmit","preventDefault","onSubmitPassword","classes","root","mapSateToProps","state","auth"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport Helmet from 'react-helmet';\nimport { Container, Form } from 'react-bootstrap';\n\n// Actions\nimport {\n  loadSettings,\n  updateProfile,\n  updatePassword,\n  clearErrors,\n} from '../../../redux/actions/authActions';\nimport { setAlert } from '../../../redux/actions/alertActions';\n\n// App layout components\nimport Spinner from '../../layout/Spinner';\n\n// Utils\nimport { WEBSITE_NAME } from '../../../utils/Data';\nimport useStyles from './drop-jss';\n\nconst Settings = (props) => {\n  const {\n    user,\n    error,\n    loading_settings,\n    loadSettings,\n    updateProfile,\n    updatePassword,\n    clearErrors,\n    setAlert,\n  } = props;\n\n  const [userData, setUserData] = useState({\n    username: '',\n    email: '',\n    name: '',\n    bio: '',\n    gender: 0,\n    allow_messages: false,\n  });\n\n  useEffect(() => {\n    loadSettings();\n\n    //eslint-disable-next-line\n  }, []);\n\n  const { username, email, name, bio, gender, allow_messages } = userData;\n\n  const [passwords, setPasswords] = useState({\n    old_password: '',\n    new_password: '',\n  });\n\n  const { old_password, new_password } = passwords;\n\n  const onChange = (e) =>\n    setUserData({ ...user, [e.target.name]: e.target.value });\n\n  const onChangeGender = (e) =>\n    setUserData({ ...userData, gender: parseInt(e.target.value) });\n\n  const onChangePosition = (e) =>\n    setUserData({ ...userData, bio: e.target.value });\n\n  const onChangeAllowMessages = (e) =>\n    setUserData({\n      ...userData,\n      allow_messages: e.target.value === 'true' ? true : false,\n    });\n\n  const onChangePasswords = (e) =>\n    setPasswords({ ...passwords, [e.target.name]: e.target.value });\n\n  useEffect(() => {\n    if (error && error.length) {\n      if (typeof error === 'object') {\n        error.forEach((err) => {\n          setAlert(err.msg, 'danger');\n        });\n      } else {\n        setAlert(error, 'danger');\n      }\n\n      clearErrors();\n    }\n\n    // eslint-disable-next-line\n  }, [error]);\n\n  useEffect(() => {\n    if (user) {\n      setUserData({ ...userData, ...user });\n    }\n\n    // eslint-disable-next-line\n  }, [user]);\n\n  const onSubmit = async (e) => {\n    e.preventDefault();\n\n    await updateProfile({\n      allow_messages,\n      name,\n      bio,\n      gender,\n    });\n  };\n\n  const onSubmitPassword = async (e) => {\n    e.preventDefault();\n\n    if (old_password === '') {\n      setAlert('Old password is empty', 'danger');\n      return;\n    }\n\n    if (new_password === '' || new_password.length < 6) {\n      setAlert('Password must contain at least 6 characters', 'danger');\n      return;\n    }\n\n    await updatePassword({\n      old_password,\n      new_password,\n    });\n  };\n  const classes = useStyles()\n  return (\n    <>\n      <Helmet>\n        <title>{`${WEBSITE_NAME} | Settings`}</title>\n      </Helmet>\n      <Container className={`${classes.root}`} >\n        <div className='container-inner px-3 mt-4'>\n          {loading_settings ? (\n            <div className='text-center'>\n              <Spinner />\n            </div>\n          ) : (\n            <div className='settings mx-auto'>\n              <h4 className='mb-3'>\n                <strong className='title'>Your informations</strong>\n              </h4>\n              <Form className='form form-container' onSubmit={onSubmit}>\n                <Form.Group>\n                  <Form.Label className='subtitle'>Email</Form.Label>\n                  <Form.Control\n                    type='email'\n                    placeholder='Email'\n                    name='email'\n                    value={email}\n                    readOnly\n                  />\n                </Form.Group>\n\n                <Form.Group>\n                  <Form.Label className='subtitle'>Username</Form.Label>\n                  <Form.Control\n                    type='text'\n                    placeholder='Username'\n                    name='username'\n                    value={username}\n                    readOnly\n                  />\n                </Form.Group>\n\n                <Form.Group>\n                  <Form.Label className='subtitle'>Fullname</Form.Label>\n                  <Form.Control\n                    type='text'\n                    placeholder='Fullname'\n                    name='name'\n                    value={name}\n                    onChange={onChange}\n                  />\n                </Form.Group>\n\n                \n\n                <Form.Group>\n                  <Form.Label className='subtitle'>Position</Form.Label>\n                  <Form.Control\n                    as='select'\n                    name='bio'\n                    value={bio}\n                    onChange={onChangePosition}\n                  >\n                    <option defaultValue value={4}>\n                      Not defined\n                    </option>\n                    <option value='MCA'>MCA</option>\n                    <option value='MCB'>MCB</option>\n                    <option value='Professor'>Professor</option>\n                    <option value='Administration staff'>Administration staff</option>\n                    <option value='ATS'>ATS</option>\n\n                  </Form.Control>\n                </Form.Group>\n\n                <Form.Group>\n                  <Form.Label className='subtitle'>Gender</Form.Label>\n                  <Form.Control\n                    as='select'\n                    name='gender'\n                    value={gender}\n                    onChange={onChangeGender}\n                  >\n                    <option defaultValue value={3}>\n                      Not defined\n                    </option>\n                    <option value={1}>Male</option>\n                    <option value={2}>Female</option>\n                  </Form.Control>\n                </Form.Group>\n\n                <Form.Group>\n                  <Form.Label className='subtitle'>Allow receiving Notifications</Form.Label>\n                  <Form.Control\n                    as='select'\n                    name='allow_messages'\n                    value={allow_messages}\n                    onChange={onChangeAllowMessages}\n                  >\n                    <option value={true}>Yes</option>\n                    <option value={false}>No</option>\n                  </Form.Control>\n                </Form.Group>\n\n                <div className='links d-flex align-items-center justify-content-end mt-4'>\n                  {loading_settings ? (\n                    <Spinner />\n                  ) : (\n                    <button className='button-primary' type='submit' onClick={onSubmit}>\n                     Update\n                  </button>\n                  )}\n                </div>\n              </Form>\n\n              <h4 className='my-3'>\n                <strong className='title'>Security</strong>\n              </h4>\n              <Form className='form form-container' onSubmit={onSubmitPassword}>\n                <Form.Group>\n                  <Form.Label className='subtitle'>Old password</Form.Label>\n                  <Form.Control\n                    type='password'\n                    placeholder='Old password'\n                    name='old_password'\n                    value={old_password}\n                    onChange={onChangePasswords}\n                  />\n                </Form.Group>\n\n                <Form.Group>\n                  <Form.Label className='subtitle'>New password</Form.Label>\n                  <Form.Control\n                    type='password'\n                    placeholder='New password'\n                    name='new_password'\n                    value={new_password}\n                    onChange={onChangePasswords}\n                  />\n                </Form.Group>\n\n                <div className='links d-flex align-items-center justify-content-end mt-4'>\n                  {loading_settings ? (\n                    <Spinner />\n                  ) : (\n                    <button className='button-primary' type='submit' onClick={onSubmit}>\n                        Update\n                     </button>\n                  )}\n                </div>\n              </Form>\n            </div>\n          )}\n        </div>\n      </Container>\n    </>\n  );\n};\n\nconst mapSateToProps = (state) => ({\n  user: state.auth.user,\n  error: state.auth.error,\n  loading_settings: state.auth.loading_settings,\n});\n\nexport default connect(mapSateToProps, {\n  loadSettings,\n  updateProfile,\n  updatePassword,\n  clearErrors,\n  setAlert,\n})(Settings);\n"]},"metadata":{},"sourceType":"module"}